## –û–ø–∏—Å–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
logFileFull.log - –ø–æ–ª–Ω—ã–π –ª–æ–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è  

Vagrant_folder - –≤—Å–µ —á—Ç–æ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è –ø–æ–¥–Ω—è—Ç–∏—è VM –∏ –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –≤ –Ω–µ–π  
Vagrantfile - –≤–∞–≥—Ä–∞–Ω—Ç —Ñ–∞–π–ª  

## –¢–µ–æ—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç—å
```
**–°–µ—Ç—å office1**
- 192.168.2.0/26 - dev 
Network:   192.168.2.0/26
Broadcast: 192.168.2.63
HostMin:   192.168.2.1
HostMax:   192.168.2.62
Hosts: 62
- 192.168.2.64/26 - test servers 
Network:   192.168.2.64/26
Broadcast: 192.168.2.127
HostMin:   192.168.2.65
HostMax:   192.168.2.126
Hosts: 62
- 192.168.2.128/26 - managers
Network:   192.168.2.128/26
Broadcast: 192.168.2.191
HostMin:   192.168.2.129
HostMax:   192.168.2.190
Hosts: 62
- 192.168.2.192/26 - office hardware
Network:   192.168.2.192/26
Broadcast: 192.168.2.255
HostMin:   192.168.2.193
HostMax:   192.168.2.254
Hosts: 62

**–°–µ—Ç—å office2**
- 192.168.1.0/25 - dev 
Network:   192.168.1.0/25
Broadcast: 192.168.1.127
HostMin:   192.168.1.1
HostMax:   192.168.1.126
Hosts: 126
- 192.168.1.128/26 - test servers
Network:   192.168.1.128/26
Broadcast: 192.168.1.191
HostMin:   192.168.1.129
HostMax:   192.168.1.190
Hosts: 62
- 192.168.1.192/26 - office hardware 
Network:   192.168.1.192/26
Broadcast: 192.168.1.255
HostMin:   192.168.1.193
HostMax:   192.168.1.254
Hosts: 62

**–°–µ—Ç—å central**
- 192.168.0.0/28 - directors 
Network:   192.168.0.0/28
Broadcast: 192.168.0.15
HostMin:   192.168.0.1
HostMax:   192.168.0.14
Hosts: 14       

- 192.168.0.32/28 - office hardware
Network:   192.168.0.32/28
Broadcast: 192.168.0.47
HostMin:   192.168.0.33
HostMax:   192.168.0.46
Hosts: 14 

- 192.168.0.64/26 - wifi
Network:   192.168.0.64/26
Broadcast: 192.168.0.127
HostMin:   192.168.0.65
HostMax:   192.168.0.126
Hosts: 62

**–°–≤–æ–±–æ–¥–Ω—ã–µ –ø–æ–¥—Å–µ—Ç–∏**

- 192.168.0.16/28 - –°–≤–æ–±–æ–¥–Ω–∞
- Broadcast: 192.168.0.31

- 192.168.0.48/28 - –°–≤–æ–±–æ–¥–Ω–∞
- Broadcast: 192.168.0.63

- 192.168.0.128/25 - –°–≤–æ–±–æ–¥–Ω–∞
- Broadcast: 192.168.0.255
```
## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç—å  
## –û–ø–∏—Å–∞–Ω–∏–µ –∫–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É (–∫—Ä–∞—Ç–∫–æ)
–ü–æ–¥–Ω—è—Ç—å –í–ú –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –í–ú office1Server
```
vagrant up
vagrant ssh office1Server
```
–í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –Ω–∏–∂–µ —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ —Å–µ—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ã, –∞ —Ç–∞–∫ –∂–µ –¥–æ—Å—Ç—É–ø–Ω—ã –≤–Ω–µ—à–Ω–∏–µ —Ä–µ—Å—É—Ä—Å—ã –∏ –º–∞—Ä—à—Ä—É—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ inetRouter  
192.168.1.130 - office2Server  
192.168.0.2 - centralServer
```
ping -c 1 192.168.1.130
ping -c 1 192.168.0.2
ping -c 1 google.com
tracepath google.com
```

# VagrantFile —Ç–æ–ª—å–∫–æ –≤–∞–∂–Ω–æ–µ
–í—Å–µ router –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏. –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –≤—ã–±—Ä–∞–Ω—ã –∞–¥—Ä–µ—Å–∞ –∏–∑ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.  
net.ipv4.conf.all.forwarding - –í–∫–ª—é—á–µ–Ω–∏–µ —Ñ–æ—Ä–≤–∞—Ä–¥–∏–Ω–≥–∞ –ø–∞–∫–µ—Ç–æ–≤. –ò–Ω—ã–º–∏ —Å–ª–æ–≤–∞–º–∏, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–∞–∑—Ä–µ—à–∏—Ç—å —è–¥—Ä—É –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –æ—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—å –ø—Ä–æ–±—Ä–æ—Å —Ç—Ä–∞—Ñ–∏–∫–∞ —Å –æ–¥–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –Ω–∞ –¥—Ä—É–≥–æ–π.  
net.ipv4.conf.all.proxy_arp - –í–∫–ª—é—á–∞–µ—Ç –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ arp-–∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞. ARP-–ø—Ä–æ–∫—Å–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä—É –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ ARP –∑–∞–ø—Ä–æ—Å—ã –≤ –æ–¥–Ω—É —Å–µ—Ç—å, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–π —Ö–æ—Å—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –¥—Ä—É–≥–æ–π —Å–µ—Ç–∏.  
–û—Ç–∫–ª—é—á–∞–µ–º –ø—Ä–∏—Å–≤–æ–µ–Ω–∏–µ —à–ª—é–∑–∞ –Ω–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ eth0 –ø–æ dhcp.  
–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —à–ª—é–∑ –Ω–∞ –Ω—É–∂–Ω–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –í–ú —á—Ç–æ–±—ã –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—Å—Ç—É–ø–∏–ª–∏ –≤ —Å–∏–ª—É.
```
when "centralRouter"
  box.vm.provision "shell", run: "always", inline: <<-SHELL
    echo "net.ipv4.conf.all.forwarding=1" >> /etc/sysctl.d/99-sysctl.conf
    echo "net.ipv4.conf.all.proxy_arp=1" >> /etc/sysctl.d/99-sysctl.conf
    echo "DEFROUTE=no" >> /etc/sysconfig/network-scripts/ifcfg-eth0
    echo "GATEWAY=192.168.255.1" >> /etc/sysconfig/network-scripts/ifcfg-eth1
    reboot
    SHELL
```
–¥–æ–±–∞–≤–ª—è–µ–º –º–∞—Ä—à—Ä—É—Ç—ã inetRouter —á—Ç–æ–±—ã –æ–Ω –∑–Ω–∞–ª –∫—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø–∞–∫–µ—Ç—ã –≤ –ª–æ–∫–∞–ª—å–Ω—É—é —Å–µ—Ç—å  
192.168.255.2 - centralRouter
```
ip r add 192.168.0.0/24 via 192.168.255.2
ip r add 192.168.1.0/24 via 192.168.255.2
ip r add 192.168.2.0/24 via 192.168.255.2
```

üìö–î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ/–ø—Ä–æ–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ(-–Ω–∞) –¥–ª—è –∫—É—Ä—Å–∞ ["Administrator Linux. Professional"](https://otus.ru/lessons/linux-professional/)